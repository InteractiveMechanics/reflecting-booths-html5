{"version":3,"file":null,"sources":["../src/index.js"],"sourcesContent":["import assign from 'object-assign';\nimport pascalCase from 'pascal-case';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\nconst defaults = {\n  React,\n  ReactDOM,\n};\n\nfunction syncEvent(node, eventName, newEventHandler) {\n  const eventNameLc = eventName[0].toLowerCase() + eventName.substring(1);\n  const eventStore = node.__events || (node.__events = {});\n  const oldEventHandler = eventStore[eventNameLc];\n\n  // Remove old listener so they don't double up.\n  if (oldEventHandler) {\n    node.removeEventListener(eventNameLc, oldEventHandler);\n  }\n\n  // Bind new listener.\n  if (newEventHandler) {\n    node.addEventListener(eventNameLc, eventStore[eventNameLc] = function handler(e) {\n      newEventHandler.call(this, e);\n    });\n  }\n}\n\nexport default function (CustomElement, opts) {\n  opts = assign({}, defaults, opts);\n  if (typeof CustomElement !== 'function') {\n    throw new Error('Given element is not a valid constructor');\n  }\n  const tagName = (new CustomElement()).tagName;\n  const displayName = pascalCase(tagName);\n  const { React, ReactDOM } = opts;\n\n  if (!React || !ReactDOM) {\n    throw new Error('React and ReactDOM must be dependencies, globally on your `window` object or passed via opts.');\n  }\n\n  class ReactComponent extends React.Component {\n    static get displayName() {\n      return displayName;\n    }\n    componentDidMount() {\n      this.componentWillReceiveProps(this.props);\n    }\n    componentWillReceiveProps(props) {\n      const node = ReactDOM.findDOMNode(this);\n      Object.keys(props).forEach(name => {\n        if (name === 'children' || name === 'style') {\n          return;\n        }\n\n        if (name.indexOf('on') === 0 && name[2] === name[2].toUpperCase()) {\n          syncEvent(node, name.substring(2), props[name]);\n        } else {\n          node[name] = props[name];\n        }\n      });\n    }\n    render() {\n      return React.createElement(tagName, { style: this.props.style }, this.props.children);\n    }\n  }\n\n  const proto = CustomElement.prototype;\n  Object.getOwnPropertyNames(proto).forEach(prop => {\n    Object.defineProperty(ReactComponent.prototype, prop, Object.getOwnPropertyDescriptor(proto, prop));\n  });\n\n  return ReactComponent;\n}\n"],"names":["defaults","syncEvent","node","eventName","newEventHandler","eventNameLc","toLowerCase","substring","eventStore","__events","oldEventHandler","removeEventListener","addEventListener","handler","e","call","CustomElement","opts","assign","Error","tagName","displayName","pascalCase","React","ReactDOM","ReactComponent","componentWillReceiveProps","props","findDOMNode","keys","forEach","name","indexOf","toUpperCase","createElement","style","children","Component","proto","prototype","getOwnPropertyNames","defineProperty","prop","Object","getOwnPropertyDescriptor"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAKA,IAAMA,cAAW;cAAA;;CAAjB;;AAKA,SAASC,SAAT,CAAmBC,IAAnB,EAAyBC,SAAzB,EAAoCC,eAApC,EAAqD;MAC7CC,cAAcF,UAAU,CAAV,EAAaG,WAAb,KAA6BH,UAAUI,SAAV,CAAoB,CAApB,CAAjD;MACMC,aAAaN,KAAKO,QAAL,KAAkBP,KAAKO,QAAL,GAAgB,EAAlC,CAAnB;MACMC,kBAAkBF,WAAWH,WAAX,CAAxB;;;MAGIK,eAAJ,EAAqB;SACdC,mBAAL,CAAyBN,WAAzB,EAAsCK,eAAtC;;;;MAIEN,eAAJ,EAAqB;SACdQ,gBAAL,CAAsBP,WAAtB,EAAmCG,WAAWH,WAAX,IAA0B,SAASQ,OAAT,CAAiBC,CAAjB,EAAoB;sBAC/DC,IAAhB,CAAqB,IAArB,EAA2BD,CAA3B;KADF;;;;AAMJ,YAAe,UAAUE,aAAV,EAAyBC,IAAzB,EAA+B;SACrCC,OAAO,EAAP,EAAWlB,WAAX,EAAqBiB,IAArB,CAAP;MACI,OAAOD,aAAP,KAAyB,UAA7B,EAAyC;UACjC,IAAIG,KAAJ,CAAU,0CAAV,CAAN;;MAEIC,UAAW,IAAIJ,aAAJ,EAAD,CAAsBI,OAAtC;MACMC,cAAcC,WAAWF,OAAX,CAApB;cAC4BH,IAPgB;MAOpCM,QAPoC,SAOpCA,KAPoC;MAO7BC,WAP6B,SAO7BA,QAP6B;;;MASxC,CAACD,QAAD,IAAU,CAACC,WAAf,EAAyB;UACjB,IAAIL,KAAJ,CAAU,+FAAV,CAAN;;;MAGIM,cAbsC;;;;;;;;;;0CAiBtB;aACbC,yBAAL,CAA+B,KAAKC,KAApC;;;;gDAEwBA,KApBgB,EAoBT;YACzBzB,OAAOsB,YAASI,WAAT,CAAqB,IAArB,CAAb;eACOC,IAAP,CAAYF,KAAZ,EAAmBG,OAAnB,CAA2B,gBAAQ;cAC7BC,SAAS,UAAT,IAAuBA,SAAS,OAApC,EAA6C;;;;cAIzCA,KAAKC,OAAL,CAAa,IAAb,MAAuB,CAAvB,IAA4BD,KAAK,CAAL,MAAYA,KAAK,CAAL,EAAQE,WAAR,EAA5C,EAAmE;sBACvD/B,IAAV,EAAgB6B,KAAKxB,SAAL,CAAe,CAAf,CAAhB,EAAmCoB,MAAMI,IAAN,CAAnC;WADF,MAEO;iBACAA,IAAL,IAAaJ,MAAMI,IAAN,CAAb;;SARJ;;;;+BAYO;eACAR,SAAMW,aAAN,CAAoBd,OAApB,EAA6B,EAAEe,OAAO,KAAKR,KAAL,CAAWQ,KAApB,EAA7B,EAA0D,KAAKR,KAAL,CAAWS,QAArE,CAAP;;;;0BArBuB;eAChBf,WAAP;;;;IAFyBE,SAAMc,SAbS;;MAuCtCC,QAAQtB,cAAcuB,SAA5B;SACOC,mBAAP,CAA2BF,KAA3B,EAAkCR,OAAlC,CAA0C,gBAAQ;WACzCW,cAAP,CAAsBhB,eAAec,SAArC,EAAgDG,IAAhD,EAAsDC,OAAOC,wBAAP,CAAgCN,KAAhC,EAAuCI,IAAvC,CAAtD;GADF;;SAIOjB,cAAP;;;;;;;"}